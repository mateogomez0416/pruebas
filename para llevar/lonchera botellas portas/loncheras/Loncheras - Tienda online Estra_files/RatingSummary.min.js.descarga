(window.webpackJsonpvtex_reviews_and_ratings_2_12_8=window.webpackJsonpvtex_reviews_and_ratings_2_12_8||[]).push([["RatingSummary"],{0:function(e,t){e.exports=React},1:function(e,t){e.exports=ReactIntl},12:function(e,t){e.exports=__RENDER_8_COMPONENTS__["vtex.product-context@0.x/useProduct"]},30:function(e,t){var a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"TotalReviewsByProductId"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"productId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[{kind:"Directive",name:{kind:"Name",value:"context"},arguments:[{kind:"Argument",name:{kind:"Name",value:"sender"},value:{kind:"StringValue",value:"vtex.reviews-and-ratings@2.12.8",block:!1}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalReviewsByProductId"},arguments:[{kind:"Argument",name:{kind:"Name",value:"productId"},value:{kind:"Variable",name:{kind:"Name",value:"productId"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"runtimeMeta"},arguments:[{kind:"Argument",name:{kind:"Name",value:"hash"},value:{kind:"StringValue",value:"c59bc5ec13d7da6a1a8a3cd99fae3785904c0d52f23c94c7a74d0c8b10935cc6",block:!1}}]}]}]}}],loc:{start:0,end:243}};a.loc.source={body:'query TotalReviewsByProductId($productId: String!) @context(sender: "vtex.reviews-and-ratings@2.12.8") {\n  totalReviewsByProductId(productId: $productId) @runtimeMeta(hash: "c59bc5ec13d7da6a1a8a3cd99fae3785904c0d52f23c94c7a74d0c8b10935cc6")\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function i(e,t){for(var a=0;a<e.definitions.length;a++){var n=e.definitions[a];if(n.name&&n.name.value==t)return n}}a.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,a){if("FragmentSpread"===t.kind)a.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&a.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,a)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,a)})),t.definitions&&t.definitions.forEach((function(t){e(t,a)}))}(e,t),n[e.name.value]=t}})),e.exports=a,e.exports.TotalReviewsByProductId=function(e,t){var a={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(a.loc=e.loc);var r=n[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var c=s;s=new Set,c.forEach((function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var n=i(e,t);n&&a.definitions.push(n)})),a}(a,"TotalReviewsByProductId")},31:function(e,t){e.exports=ReactHelmet},32:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(5),i=function(){var e=n.canUseDOM?window.location.hostname:global.__hostname__,t=n.canUseDOM?window.__RUNTIME__.rootPath:global.__RUNTIME__.rootPath;return"".concat("https","://").concat(e).concat(null!=t?t:"")}},5:function(e,t){e.exports=__RENDER_8_RUNTIME__},7:function(e,t){e.exports=ReactApollo},79:function(e,t,a){"use strict";a.r(t),function(e){var t=a(4);a.p=Object(t.getPublicPath)("vtex.reviews-and-ratings@2.12.8");var n=Object(t.register)((function(){return a(80)}),e,"vtex.reviews-and-ratings@2.12.8","vtex.reviews-and-ratings@2.x","RatingSummary");n.renderHotReload,n.setupHMR}.call(this,a(17)(e))},8:function(e,t){e.exports=__RENDER_8_COMPONENTS__["vtex.styleguide@9.x/Button"]},80:function(e,t,a){"use strict";a.r(t);var n=a(2),i=a(0),r=a.n(i),o=a(31),s=a(7),c=a(12),u=a.n(c),l=a(9),d=a.n(l),m=a(1),v=a(5),g=a(8),f=a.n(g),p=a(22),_=a.n(p),w=a(13),y=a(30),E=a.n(y),h=a(21),N=a.n(h),R=a(32),S={total:0,average:0,hasTotal:!1,hasAverage:!1,settings:{defaultOpen:!1,defaultOpenCount:0,allowAnonymousReviews:!1,requireApproval:!0,useLocation:!1,showGraph:!1,displaySummaryIfNone:!1,displayInlineIfNone:!1,displaySummaryTotalReviews:!0,displaySummaryAddButton:!1},userAuthenticated:!1},b=function(e,t){switch(t.type){case"SET_TOTAL":return Object.assign(Object.assign({},e),{total:t.args.total,hasTotal:!0});case"SET_AVERAGE":return Object.assign(Object.assign({},e),{average:t.args.average,hasAverage:!0});case"SET_SETTINGS":return Object.assign(Object.assign({},e),{settings:t.args.settings});case"SET_AUTHENTICATED":return Object.assign(Object.assign({},e),{userAuthenticated:t.args.authenticated});default:return e}},T=["summaryContainer","loginLink","summaryButtonContainer","summaryTotalReviews"],k=Object(m.defineMessages)({loadingReviews:{id:"store/reviews.list.loadingReviews",defaultMessage:"Loading reviews..."}});t.default=function(){var e,t=Object(m.useIntl)(),a=Object(s.useApolloClient)(),c=d()(T),l=(null!==(e=u()())&&void 0!==e?e:{}).product,g=null!=l?l:{},p=g.productId,y=g.productName,h=g.linkText,O=Object(i.useReducer)(b,S),I=Object(n.a)(O,2),x=I[0],A=I[1],j=(v.canUseDOM?{url:window.location.pathname+window.location.hash,pathName:window.location.pathname}:{url:global.__pathname__,pathName:global.__pathname__}).url;Object(i.useEffect)((function(){p&&(a.query({query:E.a,variables:{productId:p}}).then((function(e){var t=e.data.totalReviewsByProductId;A({type:"SET_TOTAL",args:{total:t}})})),a.query({query:N.a,variables:{productId:p}}).then((function(e){var t=e.data.averageRatingByProductId;A({type:"SET_AVERAGE",args:{average:t}})})),a.query({query:_.a}).then((function(e){var t=e.data.appSettings;A({type:"SET_SETTINGS",args:{settings:t}})})))}),[a,p]),Object(i.useEffect)((function(){window.__RENDER_8_SESSION__.sessionPromise.then((function(e){var t,a,n=e.response;if(n&&n.namespaces){var i=n.namespaces;(null===(a=null===(t=null==i?void 0:i.authentication)||void 0===t?void 0:t.storeUserId)||void 0===a?void 0:a.value)&&A({type:"SET_AUTHENTICATED",args:{authenticated:!0}})}}))}),[]);var D=Object(R.a)();return r.a.createElement("div",{className:"".concat(c.summaryContainer," review-summary mw8 center")},x.hasTotal&&x.hasAverage?0!==x.total||x.settings.displaySummaryIfNone?r.a.createElement(i.Fragment,null,r.a.createElement(o.Helmet,null,r.a.createElement("script",{type:"application/ld+json"},JSON.stringify({"@context":"http://schema.org","@type":"Product","@id":"".concat(D,"/").concat(h,"/p"),aggregateRating:{"@type":"AggregateRating",ratingValue:x.average.toString(),reviewCount:x.total.toString()},name:y}))),r.a.createElement("span",{className:"t-heading-4 v-mid"},r.a.createElement(w.a,{rating:x.average}))," ",x.settings.displaySummaryTotalReviews?r.a.createElement("span",{className:"".concat(c.summaryTotalReviews," review__rating--count dib v-mid")},"(",x.total,")"):null,x.settings.displaySummaryAddButton?x.settings&&x.settings.allowAnonymousReviews||x.settings&&!x.settings.allowAnonymousReviews&&x.userAuthenticated?r.a.createElement("div",{className:"".concat(c.summaryButtonContainer)},r.a.createElement(f.a,{onClick:function(){var e;(e=document.getElementById("reviews-main-container"))&&e.scrollIntoView()}},r.a.createElement(m.FormattedMessage,{id:"store/reviews.list.writeReview"}))):r.a.createElement("div",{className:"".concat(c.summaryButtonContainer)},r.a.createElement(v.Link,{page:"store.login",query:"returnUrl=".concat(encodeURIComponent(j)),className:"".concat(c.loginLink," h1 w2 tc flex items-center w-100-s h-100-s pa4-s")},r.a.createElement(m.FormattedMessage,{id:"store/reviews.list.login"}))):null):null:r.a.createElement(i.Fragment,null,t.formatMessage(k.loadingReviews)))}},9:function(e,t){e.exports=__RENDER_8_COMPONENTS__["vtex.css-handles@0.x/useCssHandles"]}},[[79,"common",0]]]);