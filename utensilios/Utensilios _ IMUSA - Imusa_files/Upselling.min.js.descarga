!function(e){var t={};function r(n){if(t[n])return t[n].exports;var c=t[n]={i:n,l:!1,exports:{}};return e[n].call(c.exports,c,c.exports,r),c.l=!0,c.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)r.d(n,c,function(t){return e[t]}.bind(null,c));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=8)}([function(e,t){e.exports=React},function(e,t,r){e.exports=r(10)},function(e,t){e.exports=__RENDER_8_COMPONENTS__["vtex.css-handles@0.x/useCssHandles"]},function(e,t){e.exports=__RENDER_8_RUNTIME__},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPublicPath=t.register=void 0;var n="__RENDER_8_RUNTIME__",c="__RENDER_8_COMPONENTS__",o=!("undefined"==typeof window||!window.document);o&&!window.global&&(window.global=window),window[c]=window[c]||{},t.register=function(e,t,r,o,a){var i="".concat(r,"/").concat(a),u="".concat(o,"/").concat(a),s=function(){return function(e,t){try{var r=e();return r.__esModule?r.default:r.default||r}catch(e){throw new Error("An error happened while requiring the app ".concat(t,", please check your app's code.\\n").concat(e.stack))}}(e,i)};if(window[n]&&window[n].registerComponent){var l=!!window.__RENDER_LAZY__;window[n].registerComponent(t,l?s:s(),r,a,l)}else{var p=s();window[n]&&window[n].withHMR?window[c][i]=window[c][u]=window[n].withHMR(t,p):window[c][i]=window[c][u]=p}return{}},t.getPublicPath=function(e){var t=window.__hostname__,r="/_v/public/assets/v1/published/";return o&&window.__RUNTIME__&&(t=__RUNTIME__.assetServerPublishedHost||window.location.hostname,r=__RUNTIME__.assetServerPublishedPath||"/_v/public/assets/v1/published/"),"https://"+t+r+"".concat(e,"/public/react/")}},function(e,t){e.exports=__RENDER_8_COMPONENTS__["vtex.product-context@0.x/useProduct"]},function(e,t){e.exports=__RENDER_8_COMPONENTS__["vtex.styleguide@9.x/withToast"]},function(e,t){e.exports=__RENDER_8_COMPONENTS__["vtex.order-items@0.x/OrderItems"]},function(e,t,r){"use strict";r.r(t),function(e){var t=r(4);r.p=Object(t.getPublicPath)("groupesebcol.upselling@0.0.4");var n=Object(t.register)((function(){return r(15)}),e,"groupesebcol.upselling@0.0.4","groupesebcol.upselling@0.x","Upselling");n.renderHotReload,n.setupHMR}.call(this,r(9)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports=regeneratorRuntime},function(e,t,r){e.exports={UPS_buttonAreaTotalPrice:"groupesebcol-upselling-0-x-UPS_buttonAreaTotalPrice",UPS_toCartButton:"groupesebcol-upselling-0-x-UPS_toCartButton",UPS_buttonArea:"groupesebcol-upselling-0-x-UPS_buttonArea"}},function(e,t,r){e.exports={UPS_checkItemInput:"groupesebcol-upselling-0-x-UPS_checkItemInput",UPS_checkItemLabel:"groupesebcol-upselling-0-x-UPS_checkItemLabel",UPS_checkItemLabelPrice:"groupesebcol-upselling-0-x-UPS_checkItemLabelPrice"}},function(e,t,r){e.exports={UPS_product:"groupesebcol-upselling-0-x-UPS_product",UPS_noToCart:"groupesebcol-upselling-0-x-UPS_noToCart",UPS_plusIcon:"groupesebcol-upselling-0-x-UPS_plusIcon",UPS_imagesWrapper:"groupesebcol-upselling-0-x-UPS_imagesWrapper",UPS_image:"groupesebcol-upselling-0-x-UPS_image"}},function(e,t,r){e.exports={UPS_sectionTitle:"groupesebcol-upselling-0-x-UPS_sectionTitle",UPS_container:"groupesebcol-upselling-0-x-UPS_container",UPS_imagesWrapper:"groupesebcol-upselling-0-x-UPS_imagesWrapper",UPS_checksWrapper:"groupesebcol-upselling-0-x-UPS_checksWrapper",UPS_checkItem:"groupesebcol-upselling-0-x-UPS_checkItem",UPS_checkItemInput:"groupesebcol-upselling-0-x-UPS_checkItemInput",UPS_checkItemLabel:"groupesebcol-upselling-0-x-UPS_checkItemLabel",UPS_section:"groupesebcol-upselling-0-x-UPS_section"}},function(e,t,r){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}function o(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}r.r(t);var a=r(1),i=r.n(a);function u(e,t,r,n,c,o,a){try{var i=e[o](a),u=i.value}catch(e){return void r(e)}i.done?t(u):Promise.resolve(u).then(n,c)}function s(e){return function(){var t=this,r=arguments;return new Promise((function(n,c){var o=e.apply(t,r);function a(e){u(o,n,c,a,i,"next",e)}function i(e){u(o,n,c,a,i,"throw",e)}a(void 0)}))}}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,c=!1,o=void 0;try{for(var a,i=e[Symbol.iterator]();!(n=(a=i.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){c=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(c)throw o}}return r}}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var p=r(0),d=r.n(p),m=r(5),f=r.n(m),_=r(3),b=r(2),g=r.n(b),h=r(6),P=r.n(h),v=r(7),S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,n=e.substring(0,e.lastIndexOf("/"));return"".concat(n,"-").concat(t,"-").concat(r)};function y(e,t,r){if("number"==typeof e)return new Intl.NumberFormat(t||"es-CO",{style:"currency",currency:r||"COP",maximumFractionDigits:0}).format(e)}var x=function e(t){var r=t||{};return Object.values(r).reduce((function(t,r){return r.reduce((function(t,r){var n=r.children?e(r.children):0;return t+r.price*r.quantity+n*r.quantity}),0)+t}),0)},I=function(e){var t,r,n,c,o,a;return{id:e.items[0].itemId,ean:e.items[0].ean,productId:null!==(t=e.productId)&&void 0!==t?t:"",quantity:1,detailUrl:"/".concat(e.linkText,"/p"),name:e.productName||"",brand:null!==(r=e.brand)&&void 0!==r?r:"",category:e.categories&&e.categories.length>0?e.categories[0]:"",productRefId:null!==(n=e.productReference)&&void 0!==n?n:"",seller:e.items[0].sellers[0].sellerId,sellerName:e.items[0].sellers[0].sellerName,variant:e.items[0].name,skuName:e.items[0].name,price:100*e.items[0].sellers[0].commertialOffer.PriceWithoutDiscount,listPrice:100*e.items[0].sellers[0].commertialOffer.ListPrice,sellingPrice:100*e.items[0].sellers[0].commertialOffer.Price,sellingPriceWithAssemblies:100*(e.items[0].sellers[0].commertialOffer.Price+x(null!==(o=null===(c=e.assemblyOptions)||void 0===c?void 0:c.items)&&void 0!==o?o:{})),measurementUnit:e.items[0].measurementUnit,skuSpecifications:e.skuSpecifications||[],imageUrl:null===(a=e.items[0].images[0])||void 0===a?void 0:a.imageUrl,referenceId:e.items[0].referenceId}},U=function(){var e=s(i.a.mark((function e(t){var r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/catalog_system/pub/products/search?fq=productId:".concat(t));case 2:return r=e.sent,e.next=5,r.json();case 5:return n=e.sent,e.next=8,Promise.all(n);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=["UPS_section","UPS_container","UPS_sectionTitle","UPS_imagesWrapper","UPS_checksWrapper"],O=["UPS_buttonArea","UPS_buttonAreaTotalText","UPS_buttonAreaTotalPrice","UPS_toCartButton"],E=["UPS_checkItem","UPS_checkItemInput","UPS_checkItemLabel","UPS_checkItemLabelPrice"],k=["UPS_product","UPS_image","UPS_plusIcon","UPS_noToCart"],N=(r(11),P()((function(e){var t=e.showToast,r=e.product,n=e.products,c=e.toCartIds,a=e.bundlePrice,u=g()(O),m=Object(v.useOrderItems)().addItems,f=l(Object(p.useState)(!1),2),_=f[0],b=f[1],h=Object(p.useRef)({});Object(p.useEffect)((function(){return function(){Object.values(h.current).forEach(clearTimeout)}}),[]),Object(p.useEffect)((function(){var e=h.current;_&&(e.loading=window.setTimeout((function(){b(!1)}),500))}),[_]);var P=function(){var e=s(i.a.mark((function e(c,a){var u,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.stopPropagation(),c.preventDefault(),!_){e.next=4;break}return e.abrupt("return");case 4:b(!0),u=a.includes(r.productId)?[I(r)]:[],s=(null==n?void 0:n.filter((function(e){return a.includes(e.productId)})))||[],u=[].concat(o(u),o(s.map((function(e){return I(e)})))),m(u),h.current.toast=window.setTimeout((function(){t({message:"√çtems agregados al carrito con exito"})}),500);case 10:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();return d.a.createElement("div",{className:"ml5 ".concat(u.UPS_buttonArea)},a?d.a.createElement("p",{className:"mt0 mb3 ".concat(u.UPS_buttonAreaTotalText)},"Precio total:",d.a.createElement("b",{className:"".concat(u.UPS_buttonAreaTotalPrice)}," ",y(a))):null,c.length?d.a.createElement("div",{className:"flex items-center justify-center pa3 white fw6 pointer ".concat(u.UPS_toCartButton),onClick:function(e){return P(e,c)}},_?"Agregando...":1===c.length?"Agregar item al carrito":2===c.length?"Agregar ambos items al carrito":"Agregar los ".concat(c.length," items al carrito")):null)}))),T=(r(12),function(e){var t=e.product,r=e.toCartIds,n=e.htmlId,c=e.inputName,o=void 0===c?"UPS_checkItems":c,a=e.customText,i=e.handleChange,u=e.hiddenCheckbox,s=g()(E);return d.a.createElement("div",{className:"flex items-center mv3 ".concat(s.UPS_checkItem)},u?"":d.a.createElement("div",null,d.a.createElement("input",{className:"mr3 ".concat(s.UPS_checkItemInput),type:"checkbox",name:o,id:n,checked:r.includes(t.productId),onChange:function(){return i(t.productId)}})),d.a.createElement("label",{className:"".concat(s.UPS_checkItemLabel),htmlFor:n},a&&d.a.createElement("b",null,a),t.productName," -",d.a.createElement("span",{className:"fw6 ml4 ".concat(s.UPS_checkItemLabelPrice)},y(t.items[0].sellers[0].commertialOffer.Price,"es-CO","COP"))))}),C=(r(13),function(e){var t=e.item,r=e.toCartIds,n=e.displayStyle,c=g()(k);return"hide"!==n||r.includes(t.productId)?d.a.createElement(p.Fragment,null,d.a.createElement(_.Link,{className:"flex ".concat(c.UPS_product," ").concat(r.includes(t.productId)?"":c.UPS_noToCart),to:"/".concat(t.linkText,"/p")},d.a.createElement("img",{className:"".concat(c.UPS_image),src:S(t.items[0].images[0].imageUrl,120,120),alt:t.productName,width:120,height:120})),d.a.createElement("p",{className:"ma0 mh5 fw6 ".concat(c.UPS_plusIcon)},"+")):null});r(14),t.default=function(e){var t=e.sectionTitle,r=void 0===t?"Comprados juntos habitualmente":t,n=e.notSelectedStyle,c=void 0===n?"opacity":n,a=e.renderConditions,u=void 0===a?{condition:"none"}:a,m=e.fetchMethod,b=void 0===m?{type:"accessories"}:m,h=g()(w),P=f()().product,v=Object(_.useRuntime)().deviceInfo,S=l(Object(p.useState)([]),2),y=S[0],x=S[1],I=l(Object(p.useState)(0),2),O=I[0],E=I[1],k=l(Object(p.useState)([]),2),j=k[0],A=k[1],R=l(Object(p.useState)(!1),2),M=R[0],L=R[1],W=function(){var e=s(i.a.mark((function e(){var t,r,n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(M){e.next=2;break}return e.abrupt("return");case 2:return t="/api/catalog_system/pub/products/crossselling/accessories/".concat(P.productId),"collection"===b.type&&"string"==typeof b.params&&(t="/api/catalog_system/pub/products/search?fq=productClusterIds:".concat(b.params)),e.next=6,fetch(t);case 6:return r=e.sent,e.next=9,r.json();case 9:n=e.sent,r.ok&&n&&(c=n.filter((function(e){return e.items[0].sellers[0].commertialOffer.AvailableQuantity})),x(c));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=s(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(M){e.next=2;break}return e.abrupt("return");case 2:if(t=[],!b||!Array.isArray(b.params)){e.next=7;break}return e.next=6,Promise.all(b.params.map(function(){var e=s(i.a.mark((function e(r){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(r);case 2:(n=e.sent).length&&t.push(n[0]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:t.length&&x(t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(p.useEffect)((function(){if("none"===u.condition)L(!0);else if("collectionId"===u.condition){if("string"==typeof u.params)P.productClusters.filter((function(e){return e.id===u.params})).length&&L(!0)}else if("categoryId"===u.condition||"productId"===u.condition){var e="categoryId"===u.condition?"categoryId":"productId";"string"==typeof u.params?P[e]===u.params&&L(!0):Array.isArray(u.params)&&u.params.includes(P[e])&&L(!0)}"productIds"===b.type&&Array.isArray(b.params)?D():W()}),[M]),Object(p.useEffect)((function(){if(null==y?void 0:y.length){var e=y.map((function(e){return e.items[0].sellers[0].commertialOffer.Price+e.items[0].sellers[0].commertialOffer.Tax})).reduce((function(e,t){return e+t}));E(e+(null==P?void 0:P.items[0].sellers[0].commertialOffer.Price)||0),null==P||P.items[0].sellers[0].commertialOffer.Tax,A([null==P?void 0:P.productId].concat(o(y.map((function(e){return e.productId})))))}}),[P,y]),Object(p.useEffect)((function(){if(null==y?void 0:y.length){var e=null==y?void 0:y.filter((function(e){return j.includes(e.productId)})),t=null==e?void 0:e.map((function(e){return e.items[0].sellers[0].commertialOffer.Price+e.items[0].sellers[0].commertialOffer.Tax})),r=(null==t?void 0:t.length)?null==t?void 0:t.reduce((function(e,t){return e+t})):0;E(r+(j.includes(P.productId)?P.items[0].sellers[0].commertialOffer.Price+P.items[0].sellers[0].commertialOffer.Tax:0))}}),[j]);var q,H,B,F,Q=function(e){j.includes(e)?A(j.filter((function(t){return t!==e}))):A([].concat(o(j),[e]))};return M&&P&&y.length?d.a.createElement("section",{className:"".concat(h.UPS_section)},d.a.createElement("div",{className:"ph6 ".concat(h.UPS_container)},d.a.createElement("p",{className:"mt0 fw6 ".concat(h.UPS_sectionTitle)},r),d.a.createElement("div",{className:"flex flex-wrap items-center mv5 ".concat(h.UPS_imagesWrapper)},d.a.createElement(C,{item:P,toCartIds:j,displayStyle:c}),y.map((function(e,t){return d.a.createElement(C,{key:t,item:e,toCartIds:j,displayStyle:c})})),"phone"!==v.type&&d.a.createElement(N,{product:P,products:y,toCartIds:j,bundlePrice:O})),d.a.createElement("div",{className:"".concat(h.UPS_checksWrapper)},d.a.createElement(T,{hiddenCheckbox:!0,product:P,toCartIds:j,htmlId:"item0",customText:"Este producto: ",handleChange:Q}),(q=y,H=j,B=[],F=[],q.forEach((function(e){return H.includes(e.productId)?B.push(e):F.push(e)})),[].concat(B,F)).map((function(e,t){return d.a.createElement(T,{key:t,product:e,toCartIds:j,htmlId:"item".concat(t+1),handleChange:Q})}))),"phone"===v.type&&d.a.createElement(N,{product:P,products:y,toCartIds:j,bundlePrice:O}))):null}}]);